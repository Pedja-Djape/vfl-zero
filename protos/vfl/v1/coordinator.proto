syntax = "proto3";
package vfl.v1;

option go_package = "github.com/Pedja-Djape/vfl-zero/go/pkg/protos/vfl/v1;v1";

enum Role {
    ACTIVE = 0;
    PASSIVE = 1;
}

message RegisterPartyRequest { string party_id = 1; }
message RegisterPartyResponse { 
    string session_id = 1;
    string echo = 2;  
    Role role = 3;
}

message HeartbeatRequest { string session_id = 1; }
message HeartbeatResponse { string status = 1; int64 server_unix_nano = 2; }

message Header {
    string session_id = 1;
    string party_id = 2;
    int64 round_id = 3;
    int64 seq_no = 4;
    int64 ts_unix_nano = 5;
}

message ClientHello {
    Header header = 1;
    Role role = 2;
}

service Coordinator {
    rpc RegisterParty(RegisterPartyRequest) returns (RegisterPartyResponse);
    rpc Heartbeat(HeartbeatRequest) returns (HeartbeatResponse);
}
